<templates>
  <t t-name="o-spreadsheet-TextValueProvider">
    <div
      t-ref="autoCompleteList"
      t-on-pointerdown.prevent=""
      t-att-class="{
          'o-autocomplete-dropdown bg-white': props.proposals.length}">
      <t t-foreach="props.proposals" t-as="proposal" t-key="proposal.text + proposal_index">
        <div
          class="d-flex flex-column text-start"
          t-att-class="{'o-autocomplete-value-focus': props.selectedIndex === proposal_index}"
          t-on-click="() => this.props.onValueSelected(proposal)"
          t-on-pointermove="() => this.props.onValueHovered(proposal_index)">
          <div class="d-flex align-items-center gap-2">
            <div t-if="proposal.icon" t-call="{{proposal.icon}}"/>
            <div class="o-autocomplete-value text-truncate">
              <t t-set="htmlContent" t-value="proposal.htmlContent || [{ value: proposal.text}]"/>
              <span
                t-foreach="htmlContent"
                t-as="content"
                t-key="content_index"
                t-att-class="content.classes?.join(' ')"
                t-att-style="getCss(content)"
                t-esc="content.value"
              />
            </div>
          </div>
          <div
            class="o-autocomplete-description text-truncate"
            t-esc="proposal.description"
            t-if="props.selectedIndex === proposal_index || proposal.alwaysExpanded"
          />
        </div>
      </t>
    </div>
  </t>
</templates>
