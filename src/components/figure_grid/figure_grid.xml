<templates>
  <t t-name="o-spreadsheet-FigureGrid">
    <div class="figure-grid h-100 w-100 position-relative overflow-auto d-grid" t-ref="figureGrid">
      <t t-foreach="state.gridFigures" t-as="gridFigure" t-key="gridFigure.id">
        <div class="o-container p-1 bg-white" t-att-style="getFigureWrapperStyle(gridFigure)">
          <div class="position-relative h-100 w-100">
            <FigureComponent
              onFigureDeleted="() => {}"
              figure="getFigure(gridFigure)"
              wrapperStyle="''"
              style="getFigureStyle(gridFigure)"
              onMouseDown="(ev) => this.startDraggingFigure(gridFigure, ev)"
              onClickAnchor="(dirX, dirY, ev) => this.startResize(gridFigure, dirX, dirY, ev)"
            />
          </div>
        </div>
      </t>

      <t t-set="rowCount" t-value="30"/>
      <div
        class="pe-none"
        t-if="state.draggedFigureId "
        t-attf-style="grid-area: 1 / 1 / #{rowCount} / -1; z-index: 10">
        <t t-set="rowGap" t-value="0"/>
        <t t-set="rowSize" t-value="50"/>
        <t t-set="columnSize" t-value="gridDimensions.width"/>
        <!-- <t t-set="columnSize" t-value="110"/> -->
        <t t-set="columnGap" t-value="0"/>
        <t t-call="o-spreadsheet-BackgroundGrid"/>
      </div>
    </div>
  </t>

  <t t-name="o-spreadsheet-BackgroundGrid">
    <div t-attf-style="" class="o_we_background_grid h-100">
      <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%">
        <defs>
          <pattern
            id="cell"
            t-attf-width="#{columnSize + columnGap}px"
            t-attf-height="#{rowSize + rowGap}px"
            patternUnits="userSpaceOnUse">
            <rect
              class="o_we_cell"
              x="2"
              y="2"
              rx="4"
              t-attf-width="#{columnSize - 4}px"
              t-attf-height="#{rowSize - 4}px"
            />
          </pattern>
        </defs>

        <rect fill="url(#cell)" width="100%" height="100%"/>
      </svg>
    </div>
  </t>
</templates>
