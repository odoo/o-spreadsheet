<templates>
  <t t-name="o-spreadsheet-CarouselPanel">
    <div class="o-carousel-panel h-100 overflow-auto">
      <Section title.translate="Carousel Title" class="'o-carousel-title'">
        <TextInput
          value="title?.text ?? ''"
          onChange.bind="updateTitleText"
          placeholder.translate="Add a Title"
          alwaysShowBorder="true"
          selectContentOnFocus="true"
        />
        <TextStyler
          style="title ?? {}"
          updateStyle.bind="updateTitleStyle"
          defaultStyle="DEFAULT_CAROUSEL_TITLE_STYLE"
          hasHorizontalAlign="false"
        />
      </Section>
      <div class="o-section pb-1 pt-0">
        <div class="o-section-title">Carousel Sections</div>
      </div>
      <div class="o-carousel-preview-list overflow-auto bg-white" t-ref="previewList">
        <t t-foreach="carouselItems" t-as="item" t-key="getItemId(item)">
          <div
            class="o-carousel-preview border-bottom pe-2 position-relative w-100 d-flex align-items-center"
            t-att-class="{
              'o-dragging': dragAndDrop.draggedItemId === getItemId(item),
              'o-selected': isCarouselItemActive(item)
            }"
            t-att-style="getPreviewDivStyle(item)">
            <div
              class="o-drag-handle h-100 position-absolute d-flex align-items-center o-button-icon ps-1 flex-shrink-0"
              t-on-pointerdown.stop.prevent="(ev) => this.onDragHandleMouseDown(item, ev)">
              <t t-call="o-spreadsheet-Icon.THIN_DRAG_HANDLE"/>
            </div>
            <div
              class="o-carousel-preview-icon ms-3 flex-shrink-0 d-flex align-items-center justify-content-center">
              <t t-call="{{getItemPreview(item)}}"/>
            </div>
            <div class="o-carousel-preview-title text-truncate ms-2">
              <TextInput
                value="getItemTitle(item)"
                onChange="(newName) => this.renameCarouselItem(item, newName)"
                selectContentOnFocus="true"
              />
            </div>
            <div class="ms-auto"/>
            <div class="flex-shrink-0 d-flex me-1">
              <CogWheelMenu items="getCogWheelMenuItems(item)"/>
            </div>
          </div>
        </t>
      </div>
      <div
        class="o-button-link o-carousel-add-chart float-end d-flex align-items-center py-4 pe-4 gap-2"
        t-on-click="addNewChartToCarousel"
        t-att-title="carouselAddChartInfoMessage">
        + Add chart
      </div>
      <div
        t-if="!hasDataView"
        class="o-button-link o-carousel-add-data-view float-end py-4 pe-4"
        t-on-click="addDataViewToCarousel"
        t-att-title="carouselDataViewMessage">
        + Add data view
      </div>
    </div>
  </t>
</templates>
