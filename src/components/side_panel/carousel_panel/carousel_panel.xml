<templates>
  <t t-name="o-spreadsheet-CarouselPanel">
    <div class="o-carousel-panel h-100 overflow-auto">
      <Section title.translate="Carousel Title" class="'o-carousel-title'">
        <TextInput
          value="title?.text ?? ''"
          onChange.bind="updateTitleText"
          placeholder.translate="Add a Title"
          alwaysShowBorder="true"
        />
        <TextStyler
          style="title ?? {}"
          updateStyle.bind="updateTitleStyle"
          defaultStyle="DEFAULT_CAROUSEL_TITLE_STYLE"
          hasHorizontalAlign="false"
        />
      </Section>
      <div class="o-section pb-1 pt-0">
        <div class="o-section-title">Carousel Sections</div>
      </div>
      <div class="o-carousel-preview-list overflow-auto" t-ref="previewList">
        <t t-foreach="carouselItems" t-as="item" t-key="getItemId(item)">
          <div
            class="o-carousel-preview border-bottom pe-2 position-relative w-100 d-flex align-items-center"
            t-att-class="{ 'o-dragging': dragAndDrop.draggedItemId === getItemId(item) }"
            t-att-style="getPreviewDivStyle(item)">
            <div
              class="o-drag-handle h-100 position-absolute d-flex align-items-center o-button-icon ps-1 flex-shrink-0"
              t-on-pointerdown.stop.prevent="(ev) => this.onDragHandleMouseDown(item, ev)">
              <t t-call="o-spreadsheet-Icon.THIN_DRAG_HANDLE"/>
            </div>
            <div
              class="o-carousel-preview-icon ms-3 flex-shrink-0 d-flex align-items-center justify-content-center">
              <t t-call="{{getItemPreview(item)}}"/>
            </div>
            <div class="o-carousel-preview-title text-truncate ms-2">
              <TextInput
                value="getItemTitle(item)"
                onChange="(newName) => this.renameCarouselItem(item, newName)"
              />
            </div>
            <div class="ms-auto"/>
            <div
              t-if="item.type === 'chart'"
              class="o-edit-button o-button-icon pe-2 ps-1 flex-shrink-0 fa fa-pencil"
              t-on-click.stop="(ev) => this.editCarouselItem(item, ev)"
              title="Edit chart"
            />
            <div
              class="o-delete-button o-button-icon pe-2 ps-1 flex-shrink-0"
              t-on-click.stop="(ev) => this.deleteCarouselItem(item, ev)"
              title="Remove chart">
              <t t-call="o-spreadsheet-Icon.TRASH_FILLED"/>
            </div>
          </div>
        </t>
      </div>
      <div
        class="o-button-link o-carousel-add-chart float-end d-flex align-items-center pt-4 pe-4 gap-2"
        t-on-click="addNewChartToCarousel">
        + Add chart
        <span t-att-title="carouselAddChartInfoMessage">
          <t t-call="o-spreadsheet-Icon.CIRCLE_INFO"/>
        </span>
      </div>
      <div
        t-if="!hasDataView"
        class="o-button-link o-carousel-add-data-view float-end pt-4 pe-4"
        t-on-click="addDataViewToCarousel">
        + Add data view
      </div>
    </div>
  </t>
</templates>
