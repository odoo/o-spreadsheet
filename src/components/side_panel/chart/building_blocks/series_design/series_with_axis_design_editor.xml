<templates>
  <t t-name="o-spreadsheet-SeriesWithAxisDesignEditor">
    <SeriesDesignEditor t-props="props">
      <t t-set-slot="data-series-extension" t-slot-scope="scope">
        <t t-set="dataSetId" t-value="scope.dataSetId"/>
        <t t-slot="general-extension" dataSetId="dataSetId"/>
        <Section class="'pt-0 pb-0'">
          <Section
            class="'pt-0 px-0 o-vertical-axis-selection'"
            t-if="canHaveTwoVerticalAxis"
            title.translate="Vertical axis">
            <RadioSelection
              choices="axisChoices"
              selectedValue="getDataSerieAxis(dataSetId)"
              name="'axis'"
              onChange="(value) => this.updateDataSeriesAxis(dataSetId, value)"
            />
          </Section>
          <Section
            class="'pt-0 px-0 o-show-trend-line'"
            t-if="!props.definition.horizontal"
            title.translate="Trend line">
            <t t-set="showTrendLineLabel">Show trend line</t>
            <t t-set="trend" t-value="getTrendLineConfiguration(dataSetId)"/>
            <t t-set="trendType" t-value="getTrendType(trend)"/>
            <Checkbox
              name="'showTrendLine'"
              label="showTrendLineLabel"
              value="trend !== undefined and trend.display"
              onChange="(display) => this.toggleDataTrend(dataSetId, display)"
            />
            <div t-if="trend !== undefined and trend.display">
              <div class="d-flex py-2">
                <div class="w-100">
                  <span class="o-section-subtitle">Type</span>
                  <select
                    class="o-input trend-type-selector"
                    t-on-change="(ev) => this.onChangeTrendType(dataSetId, ev)">
                    <option value="linear" t-att-selected="trendType === 'linear'">Linear</option>
                    <option value="exponential" t-att-selected="trendType === 'exponential'">
                      Exponential
                    </option>
                    <option value="polynomial" t-att-selected="trendType === 'polynomial'">
                      Polynomial
                    </option>
                    <option value="logarithmic" t-att-selected="trendType === 'logarithmic'">
                      Logarithmic
                    </option>
                    <option
                      value="trailingMovingAverage"
                      t-att-selected="trendType === 'trailingMovingAverage'">
                      Trailing moving average
                    </option>
                  </select>
                </div>
                <div class="w-50 ms-3" t-if="trendType === 'trailingMovingAverage'">
                  <span class="o-section-subtitle">Window</span>
                  <NumberInput
                    value="trend.window || this.defaultWindowSize"
                    class="'w-100 trend-window-input'"
                    min="2"
                    onChange="(value) => this.onChangeMovingAverageWindow(dataSetId, value)"
                  />
                </div>
                <div class="w-50 ms-3" t-if="trendType === 'polynomial'">
                  <span class="o-section-subtitle">Degree</span>
                  <select
                    t-att-value="trend.order"
                    class="o-input trend-order-input"
                    t-on-change="(ev) => this.onChangePolynomialDegree(dataSetId, ev)">
                    <t t-foreach="getPolynomialDegrees(dataSetId)" t-as="degree" t-key="degree">
                      <option t-att-value="degree">
                        <t t-esc="degree"/>
                      </option>
                    </t>
                  </select>
                </div>
              </div>
              <div class="d-flex align-items-center">
                <span class="o-section-subtitle my-0 pe-2">Trend line color</span>
                <RoundColorPicker
                  currentColor="getTrendLineColor(dataSetId)"
                  onColorPicked="(ev) => this.updateTrendLineColor(dataSetId, ev)"
                />
              </div>
            </div>
          </Section>
        </Section>
      </t>
    </SeriesDesignEditor>
  </t>
</templates>
