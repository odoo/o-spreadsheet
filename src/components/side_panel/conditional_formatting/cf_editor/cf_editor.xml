<templates>
  <t t-name="o-spreadsheet-ConditionalFormattingEditor">
    <div class="o-cf-editor">
      <t t-set="state" t-value="store.state"/>
      <Section class="'o-cf-range pb-0'" title.translate="Apply to range">
        <div class="o-selection-cf">
          <SelectionInput
            ranges="state.ranges"
            class="'o-range'"
            isInvalid="store.isRangeValid"
            onSelectionChanged="(ranges) => store.onRangeUpdate(ranges)"
            onSelectionConfirmed="() => store.onRangeConfirmed()"
            required="true"
          />
        </div>
      </Section>
      <Section class="'pb-0'" title.translate="Format rules">
        <div class="o-cf-type-selector">
          <BadgeSelection
            choices="cfTypesValues"
            onChange="(ruleType) => store.changeRuleType(ruleType)"
            selectedValue="state.currentCFType"
          />
        </div>
      </Section>
      <Section class="'o-cf-rule-editor'">
        <t t-if="state.currentCFType === 'CellIsRule'" t-call="o-spreadsheet-CellIsRuleEditor">
          <t t-set="rule" t-value="state.rules.cellIs"/>
        </t>
        <t
          t-if="state.currentCFType === 'ColorScaleRule'"
          t-call="o-spreadsheet-ColorScaleRuleEditor">
          <t t-set="rule" t-value="state.rules.colorScale"/>
        </t>
        <t t-if="state.currentCFType === 'IconSetRule'" t-call="o-spreadsheet-IconSetEditor">
          <t t-set="rule" t-value="state.rules.iconSet"/>
        </t>
        <t t-if="state.currentCFType === 'DataBarRule'" t-call="o-spreadsheet-DataBarEditor">
          <t t-set="rule" t-value="state.rules.dataBar"/>
        </t>
      </Section>
      <Section class="'pt-1'">
        <div class="o-sidePanelButtons">
          <button t-on-click="onCancel" class="o-button o-cf-cancel">Cancel</button>
          <button
            t-on-click="onSave"
            class="o-button primary o-cf-save"
            t-att-disabled="state.errors.length !== 0">
            Save
          </button>
        </div>
      </Section>
      <Section>
        <ValidationMessages messages="store.errorMessages" msgType="'error'"/>
      </Section>
    </div>
  </t>
</templates>
