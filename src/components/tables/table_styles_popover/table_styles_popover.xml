<templates>
  <t t-name="o-spreadsheet-TableStylesPopover">
    <Popover t-if="props.popoverProps" t-props="props.popoverProps">
      <div class="o-table-style-popover d-flex flex-column px-4 py-1" t-ref="tableStyleList">
        <div t-foreach="categories" t-as="category" t-key="category">
          <div class="mt-2 mb-1">
            <b t-esc="category_value"/>
          </div>
          <div class="d-flex flex-wrap">
            <div
              class="o-table-style-list-item"
              t-att-class="{ 'selected': styleId === props.selectedStyleId }"
              t-foreach="getPresetsByCategory(category)"
              t-as="styleId"
              t-key="styleId"
              t-att-title="getStyleName(styleId)"
              t-on-click="() => this.props.onStylePicked(styleId)"
              t-on-contextmenu.prevent="(ev) => this.onContextMenu(ev, styleId)">
              <div class="o-table-style-popover-preview">
                <TableStylePreview tableConfig="getTableConfig(styleId)"/>
              </div>
            </div>
          </div>
          <hr t-if="!category_last" class="hr mt-2 mb-0"/>
        </div>
        <hr class="hr mt-2 mb-0"/>
        <div class="o-new-table-style d-flex align-items-center my-1" t-on-click="newTableStyle">
          <t t-call="o-spreadsheet-Icon.EDIT_TABLE"/>
          <span class="ps-2">New table style...</span>
        </div>
      </div>
      <Menu
        t-if="menu.isOpen"
        menuItems="menu.menuItems"
        position="menu.position"
        onClose.bind="this.closeMenu"
      />
    </Popover>
  </t>
</templates>
